machine:
  node:
    version: 0.12.0
dependencies:
  override:
    - npm install
    - lein bower install
test:
  override:
    - lein build-test
deployment:
  production:
    branch: master
    commands:
    - ./node_modules/gulp/bin/gulp.js deploy --host $FTP_HOST --user $FTP_USER --password $FTP_PASSWORD
  staging:
    branch: develop
    commands:
    - ./node_modules/gulp/bin/gulp.js deploy --host $STAGING_FTP_HOST --user $STAGING_FTP_USER --password $STAGING_FTP_PASSWORD
    - aws s3 sync ./resources/public s3://$STAGING_S3_BUCKET/ --delete
